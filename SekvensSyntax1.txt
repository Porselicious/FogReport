@startuml

actor Customer
boundary index.jsp
boundary measurementsAngled.jsp
boundary measurementsFlat.jsp
boundary shedpage.jsp
boundary BOMpage.jsp

control FrontController

entity HTMLGenerator
entity SVGGenerator
entity LogicFacade
entity CreateCarport
entity DBFacade
entity OrderMapper
entity MaterialMapper

database Database

Customer -> index.jsp
index.jsp -> FrontController : user selects 'Med fladt tag' from topmenu
FrontController -> HTMLGenerator : 
activate HTMLGenerator
HTMLGenerator --> FrontController : 
deactivate HTMLGenerator
FrontController --> measurementsFlat.jsp : command 'MeasurementFlat'
measurementsFlat.jsp -> FrontController : user clicks 'Fortsæt'
FrontController -> LogicFacade : createOrder()
LogicFacade -> CreateCarport : createOrder()
activate CreateCarport
CreateCarport -> DBFacade : getMaterials()
DBFacade -> MaterialMapper : getMaterials()
MaterialMapper -> Database : getMaterials()
Database --> MaterialMapper : return materials
MaterialMapper --> DBFacade : return materials
DBFacade --> CreateCarport : return materials
CreateCarport --> LogicFacade : calculateOrder()
deactivate CreateCarport
LogicFacade --> FrontController : return Order
FrontController -> SVGGenerator : carport sketch is created from Order
activate HTMLGenerator
activate SVGGenerator
SVGGenerator --> FrontController
deactivate HTMLGenerator
deactivate SVGGenerator
FrontController --> BOMpage.jsp : command 'FlatBOM'
BOMpage.jsp -> FrontController : user clicks 'Godkend' to confirm Order
FrontController -> LogicFacade : LogicFacade.addOrderToDB(order)
LogicFacade -> DBFacade : addOrderToDB(order)
DBFacade -> OrderMapper : addOrderToDB(order)
OrderMapper -> Database : Order is added to database


@enduml
